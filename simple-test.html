<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®€å•æµ‹è¯•</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #1a1a2e;
            color: #eee;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px;
            background: #16213e;
            border-radius: 10px;
        }
        h1 { color: #4ade80; }
        .test-item {
            padding: 15px;
            margin: 10px 0;
            background: #0f3460;
            border-radius: 5px;
            border-left: 4px solid #4ade80;
        }
        .error {
            border-left-color: #ef4444;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            background: #4ade80;
            border: none;
            border-radius: 5px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
        }
        button:hover {
            background: #22c55e;
        }
        #console {
            margin-top: 20px;
            padding: 15px;
            background: #000;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
        }
        .log { color: #4ade80; }
        .error-log { color: #ef4444; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ è¯Šæ–­æµ‹è¯•é¡µé¢</h1>
        
        <div class="test-item">
            <strong>âœ“ HTML åŠ è½½æˆåŠŸ</strong>
            <p>å¦‚æœä½ èƒ½çœ‹åˆ°è¿™ä¸ªé¡µé¢ï¼Œè¯´æ˜åŸºæœ¬çš„ HTML æ˜¯å¯ä»¥å·¥ä½œçš„ã€‚</p>
        </div>
        
        <div class="test-item" id="js-test">
            <strong>â³ JavaScript æµ‹è¯•ä¸­...</strong>
        </div>
        
        <div class="test-item" id="audio-test">
            <strong>â³ éŸ³é¢‘æµ‹è¯•ä¸­...</strong>
        </div>
        
        <div class="test-item" id="storage-test">
            <strong>â³ æœ¬åœ°å­˜å‚¨æµ‹è¯•ä¸­...</strong>
        </div>
        
        <div>
            <button onclick="testAudio()">æµ‹è¯•éŸ³é¢‘</button>
            <button onclick="testStorage()">æµ‹è¯•å­˜å‚¨</button>
            <button onclick="location.reload()">åˆ·æ–°é¡µé¢</button>
            <button onclick="window.location.href='index.html'">æ‰“å¼€ä¸»åº”ç”¨</button>
        </div>
        
        <div id="console"></div>
    </div>
    
    <script>
        // Console logger
        const consoleDiv = document.getElementById('console');
        function log(msg, isError = false) {
            const p = document.createElement('div');
            p.className = isError ? 'error-log' : 'log';
            p.textContent = new Date().toLocaleTimeString() + ' - ' + msg;
            consoleDiv.appendChild(p);
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
            console.log(msg);
        }
        
        // Test 1: JavaScript
        try {
            document.getElementById('js-test').innerHTML = 
                '<strong>âœ“ JavaScript æ­£å¸¸å·¥ä½œ</strong><p>DOM æ“ä½œå’Œäº‹ä»¶å¤„ç†æ­£å¸¸ã€‚</p>';
            log('âœ“ JavaScript æµ‹è¯•é€šè¿‡');
        } catch (e) {
            document.getElementById('js-test').className = 'test-item error';
            document.getElementById('js-test').innerHTML = 
                '<strong>âœ— JavaScript é”™è¯¯</strong><p>' + e.message + '</p>';
            log('âœ— JavaScript é”™è¯¯: ' + e.message, true);
        }
        
        // Test 2: Audio
        function testAudio() {
            try {
                const audio = new Audio();
                audio.src = 'data:audio/wav;base64,UklGRiYAAABXQVZFZm10IBAAAAABAAEAQB8AAAB9AAACABAAZGF0YCIAAAAAAAA=';
                audio.play().then(() => {
                    document.getElementById('audio-test').innerHTML = 
                        '<strong>âœ“ éŸ³é¢‘ç³»ç»Ÿæ­£å¸¸</strong><p>æµè§ˆå™¨æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚</p>';
                    log('âœ“ éŸ³é¢‘æµ‹è¯•é€šè¿‡');
                }).catch(e => {
                    document.getElementById('audio-test').className = 'test-item error';
                    document.getElementById('audio-test').innerHTML = 
                        '<strong>âš  éŸ³é¢‘éœ€è¦ç”¨æˆ·äº¤äº’</strong><p>' + e.message + '</p>';
                    log('âš  éŸ³é¢‘éœ€è¦ç”¨æˆ·äº¤äº’: ' + e.message);
                });
                
                // Test Web Audio API
                const ctx = new (window.AudioContext || window.webkitAudioContext)();
                log('âœ“ Web Audio API å¯ç”¨');
            } catch (e) {
                document.getElementById('audio-test').className = 'test-item error';
                document.getElementById('audio-test').innerHTML = 
                    '<strong>âœ— éŸ³é¢‘ä¸å¯ç”¨</strong><p>' + e.message + '</p>';
                log('âœ— éŸ³é¢‘é”™è¯¯: ' + e.message, true);
            }
        }
        
        // Test 3: LocalStorage
        function testStorage() {
            try {
                localStorage.setItem('test', 'ok');
                const val = localStorage.getItem('test');
                localStorage.removeItem('test');
                
                if (val === 'ok') {
                    document.getElementById('storage-test').innerHTML = 
                        '<strong>âœ“ æœ¬åœ°å­˜å‚¨æ­£å¸¸</strong><p>å¯ä»¥ä¿å­˜å’Œè¯»å–æ•°æ®ã€‚</p>';
                    log('âœ“ LocalStorage æµ‹è¯•é€šè¿‡');
                } else {
                    throw new Error('è¯»å–å¤±è´¥');
                }
            } catch (e) {
                document.getElementById('storage-test').className = 'test-item error';
                document.getElementById('storage-test').innerHTML = 
                    '<strong>âœ— æœ¬åœ°å­˜å‚¨ä¸å¯ç”¨</strong><p>' + e.message + '</p>';
                log('âœ— LocalStorage é”™è¯¯: ' + e.message, true);
            }
        }
        
        // Auto-run tests on load
        window.addEventListener('load', () => {
            log('é¡µé¢åŠ è½½å®Œæˆ');
            setTimeout(() => {
                testAudio();
                testStorage();
            }, 500);
        });
        
        // Catch all errors
        window.addEventListener('error', (e) => {
            log('âœ— å…¨å±€é”™è¯¯: ' + e.message, true);
        });
        
        log('æµ‹è¯•è„šæœ¬å·²åŠ è½½');
    </script>
</body>
</html>
