<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯¦ç»†è¯Šæ–­</title>
    <style>
        body {
            font-family: monospace;
            background: #0a0a14;
            color: #0f0;
            padding: 20px;
            line-height: 1.6;
        }
        .section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #0f0;
            border-radius: 5px;
        }
        .error { color: #f00; }
        .success { color: #0f0; }
        .warning { color: #ff0; }
        button {
            background: #0f0;
            color: #000;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        iframe {
            width: 100%;
            height: 400px;
            border: 2px solid #0f0;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ å¡”ç½—åº”ç”¨å®Œæ•´è¯Šæ–­</h1>
    
    <div class="section">
        <h2>1. æœåŠ¡å™¨è¿æ¥æµ‹è¯•</h2>
        <button onclick="testServer()">æµ‹è¯•æœåŠ¡å™¨</button>
        <pre id="server-test"></pre>
    </div>
    
    <div class="section">
        <h2>2. ä¸»é¡µé¢åŠ è½½æµ‹è¯•</h2>
        <button onclick="testMainPage()">æµ‹è¯•ä¸»é¡µé¢</button>
        <pre id="page-test"></pre>
    </div>
    
    <div class="section">
        <h2>3. JavaScriptè¯­æ³•æ£€æŸ¥</h2>
        <button onclick="testJavaScript()">æ£€æŸ¥JS</button>
        <pre id="js-test"></pre>
    </div>
    
    <div class="section">
        <h2>4. ä¸»é¡µé¢é¢„è§ˆï¼ˆå¦‚æœèƒ½çœ‹åˆ°ä¸‹é¢çš„é¡µé¢ï¼Œè¯´æ˜ä¸€åˆ‡æ­£å¸¸ï¼‰</h2>
        <button onclick="loadIframe()">åŠ è½½ä¸»é¡µé¢</button>
        <div id="iframe-container"></div>
    </div>
    
    <div class="section">
        <h2>5. å¿«é€Ÿæ“ä½œ</h2>
        <button onclick="window.location.href='index.html'">ç›´æ¥æ‰“å¼€ä¸»é¡µé¢</button>
        <button onclick="window.location.reload(true)">å¼ºåˆ¶åˆ·æ–°å½“å‰é¡µ</button>
        <button onclick="clearCache()">æ¸…é™¤ç¼“å­˜å¹¶åˆ·æ–°</button>
    </div>
    
    <script>
        function log(elementId, message, type = 'success') {
            const el = document.getElementById(elementId);
            el.className = type;
            el.textContent = message;
        }
        
        async function testServer() {
            try {
                const response = await fetch('index.html', { method: 'HEAD' });
                if (response.ok) {
                    log('server-test', `âœ… æœåŠ¡å™¨å“åº”æ­£å¸¸\nçŠ¶æ€ç : ${response.status}\nå†…å®¹ç±»å‹: ${response.headers.get('content-type')}`, 'success');
                } else {
                    log('server-test', `âŒ æœåŠ¡å™¨å“åº”å¼‚å¸¸\nçŠ¶æ€ç : ${response.status}`, 'error');
                }
            } catch (e) {
                log('server-test', `âŒ è¿æ¥å¤±è´¥: ${e.message}`, 'error');
            }
        }
        
        async function testMainPage() {
            try {
                const response = await fetch('index.html');
                const html = await response.text();
                const hasTitle = html.includes('Mystic Tarot');
                const hasScript = html.includes('<script>');
                const hasStyle = html.includes('<style>');
                const size = (html.length / 1024).toFixed(2);
                
                let result = `âœ… é¡µé¢åŠ è½½æˆåŠŸ\n`;
                result += `æ–‡ä»¶å¤§å°: ${size} KB\n`;
                result += `åŒ…å«æ ‡é¢˜: ${hasTitle ? 'âœ…' : 'âŒ'}\n`;
                result += `åŒ…å«è„šæœ¬: ${hasScript ? 'âœ…' : 'âŒ'}\n`;
                result += `åŒ…å«æ ·å¼: ${hasStyle ? 'âœ…' : 'âŒ'}\n`;
                
                log('page-test', result, hasTitle && hasScript && hasStyle ? 'success' : 'warning');
            } catch (e) {
                log('page-test', `âŒ é¡µé¢åŠ è½½å¤±è´¥: ${e.message}`, 'error');
            }
        }
        
        function testJavaScript() {
            try {
                // æµ‹è¯•åŸºæœ¬JSåŠŸèƒ½
                const test1 = () => "ç®­å¤´å‡½æ•°æµ‹è¯•";
                const test2 = `æ¨¡æ¿å­—ç¬¦ä¸²æµ‹è¯•: ${new Date().getTime()}`;
                const test3 = document.createElement('div');
                
                let result = `âœ… JavaScriptåŠŸèƒ½æ­£å¸¸\n`;
                result += `ç®­å¤´å‡½æ•°: ${test1()}\n`;
                result += `æ¨¡æ¿å­—ç¬¦ä¸²: ${test2}\n`;
                result += `DOMæ“ä½œ: ${test3 ? 'âœ…' : 'âŒ'}\n`;
                result += `fetch API: ${typeof fetch !== 'undefined' ? 'âœ…' : 'âŒ'}\n`;
                result += `localStorage: ${typeof localStorage !== 'undefined' ? 'âœ…' : 'âŒ'}\n`;
                
                log('js-test', result, 'success');
            } catch (e) {
                log('js-test', `âŒ JavaScripté”™è¯¯: ${e.message}\n${e.stack}`, 'error');
            }
        }
        
        function loadIframe() {
            const container = document.getElementById('iframe-container');
            container.innerHTML = '<iframe src="index.html"></iframe>';
        }
        
        function clearCache() {
            if (confirm('ç¡®å®šè¦æ¸…é™¤ç¼“å­˜å—ï¼Ÿé¡µé¢å°†åˆ·æ–°ã€‚')) {
                // æ¸…é™¤localStorage
                localStorage.clear();
                // æ¸…é™¤sessionStorage
                sessionStorage.clear();
                // å¼ºåˆ¶åˆ·æ–°
                window.location.reload(true);
            }
        }
        
        // è‡ªåŠ¨è¿è¡Œæµ‹è¯•
        window.onload = () => {
            setTimeout(() => {
                testServer();
                testMainPage();
                testJavaScript();
            }, 500);
        };
    </script>
</body>
</html>
